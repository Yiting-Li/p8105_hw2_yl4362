---
title: "p8105_hw2_yl4362"
output: github_document
---

```{r setup, message = FALSE}
library(tidyverse)
library(readxl)
```

## Problem 1

**Read and clean the data in Mr. Trash Wheel sheet**
```{r}
mr_trashwheel_df = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = "Mr. Trash Wheel", 
    range = "A2:N408") %>%
  janitor::clean_names() %>%
  filter(dumpster > 0) %>%
  mutate(sports_balls = as.integer(sports_balls))
```

**Read and clean the data in Precipitation 2017 and 2018 sheets**
```{r}
precipitation_2017_df = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    range = "A2:B14") %>%
  janitor::clean_names() %>%
  mutate(year = "2017")

precipitation_2018_df = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    range = "A2:B14") %>%
  janitor::clean_names() %>%
  mutate(year = "2018")

precipitation_combined_df =
  rbind(precipitation_2017_df, precipitation_2018_df)

month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precipitation_combined_df = 
  left_join(precipitation_combined_df, month_df, by = "month")
```

**Datasets description**

In the `mr_trashwheel_df` dataset, there are `r nrow(mr_trashwheel_df)` observations and `r ncol(mr_trashwheel_df)` variables. This dataset describes the dumpsters number, the trush types they collected, their corresponding volume collected, and the time they were recorded.

In the `precipitation_combined_df` dataset, there are `r nrow(precipitation_combined_df)` observations and `r ncol(precipitation_combined_df)` variables. This dataset describes the precipitation in different months over the year of 2017 to 2018.

The total precipitation in 2018 is `r sum(pull(precipitation_2018_df, total))`.

The median number of sports balls in a dumpster in 2017 is `r median(pull(mr_trashwheel_df, sports_balls), year = 2017)`.

## Problem 2

**Read and clean the NYC transit data**

```{r,message = FALSE}
nyc_transit_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line:entry, vending, ada) %>%
  mutate(entry = recode(entry, YES = TRUE, NO = FALSE))
```

**Dataset description**

The dataset `nyc_transit_df` contains the NYC subway stations' name, latitude, longitude, line, routes served there, entrance and vending, and ADA compliance. 

I cleaned the variable names into a uniform style, selected the essential variables about stations and routes, and converted the variable `entry` from character into logical.

I think the current dataset is still not tidy because the variable `vending` is stored as character although its values are logical: `YES`, `NO`.

**Answers for statistica questions**

1. There are `r nrow(distinct(nyc_transit_df, line, station_name, .keep_all = TRUE))` distinct stations.

2. `r nrow(filter(nyc_transit_df, ada == TRUE))` stations are ADA compliant.

3. The proportion of entrances / exists withouot vending allow entrace is `r nrow(filter(nyc_transit_df, vending == 'NO'))/nrow(nyc_transit_df)`.


